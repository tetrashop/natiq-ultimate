<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ù¾Ø±Ø³Ø´ Ùˆ Ù¾Ø§Ø³Ø® - Ù†Ø³Ø®Ù‡ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡</title>
    <style>
        body { font-family: Tahoma; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        .question-box { margin-bottom: 20px; }
        textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }
        button { background: #3498db; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        .result { margin-top: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px; background: #f9f9f9; }
        .success { border-color: #2ecc71; background: #e8f8ef; }
        .error { border-color: #e74c3c; background: #fdedec; }
        .loading { text-align: center; padding: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§  ØªØ³Øª Ù¾Ø±Ø³Ø´ Ùˆ Ù¾Ø§Ø³Ø® Ù†Ø·Ù‚ Ù…ØµØ·Ù„Ø­</h1>
        <p>Ù†Ø³Ø®Ù‡ Ø§ØµÙ„Ø§Ø­ Ø´Ø¯Ù‡ - Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø¯Ù‡ Ùˆ Ù¾Ø§ÛŒØ¯Ø§Ø±</p>
        
        <div class="question-box">
            <h3>Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù¾Ø±Ø³ÛŒØ¯:</h3>
            <textarea id="question" rows="3" placeholder="Ù…Ø«Ø§Ù„: Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø²Ø¨Ø§Ù† Ø·Ø¨ÛŒØ¹ÛŒ Ú†ÛŒØ³ØªØŸ">Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø²Ø¨Ø§Ù† Ø·Ø¨ÛŒØ¹ÛŒ Ú†ÛŒØ³ØªØŸ</textarea>
            
            <h4>Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…:</h4>
            <div>
                <input type="radio" id="auto" name="algorithm" value="auto" checked>
                <label for="auto">ğŸ¤– Ø®ÙˆØ¯Ú©Ø§Ø± (Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ)</label>
                
                <input type="radio" id="keyword" name="algorithm" value="keyword">
                <label for="keyword">ğŸ”‘ Ú©Ù„ÛŒØ¯ÙˆØ§Ú˜Ù‡</label>
                
                <input type="radio" id="semantic" name="algorithm" value="semantic">
                <label for="semantic">ğŸ§  Ù…Ø¹Ù†Ø§ÛŒÛŒ</label>
                
                <input type="radio" id="nlp" name="algorithm" value="nlp">
                <label for="nlp">ğŸ’¬ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø²Ø¨Ø§Ù†</label>
            </div>
            
            <button onclick="askQuestion()" style="margin-top: 10px; padding: 12px 30px; font-size: 16px;">
                ğŸ“¨ Ø§Ø±Ø³Ø§Ù„ Ø³ÙˆØ§Ù„
            </button>
        </div>
        
        <div id="resultContainer">
            <!-- Ù†ØªÛŒØ¬Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ù…ÛŒâ€ŒØ¢ÛŒØ¯ -->
        </div>
        
        <div style="margin-top: 30px; padding: 15px; background: #f0f8ff; border-radius: 5px;">
            <h4>ğŸ’¡ Ù†Ù…ÙˆÙ†Ù‡ Ø³ÙˆØ§Ù„Ø§Øª:</h4>
            <div>
                <button onclick="setQuestion('Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø²Ø¨Ø§Ù† Ø·Ø¨ÛŒØ¹ÛŒ Ú†ÛŒØ³ØªØŸ')" style="margin: 5px; padding: 8px 15px;">NLP Ú†ÛŒØ³ØªØŸ</button>
                <button onclick="setQuestion('Ù…Ù‚Ø§Ù„Ù‡ 203 Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ú†ÛŒØ³ØªØŸ')" style="margin: 5px; padding: 8px 15px;">Ù…Ù‚Ø§Ù„Ù‡ 203</button>
                <button onclick="setQuestion('Ú†Ú¯ÙˆÙ†Ù‡ Ù¾Ø§ÛŒØªÙˆÙ† ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±Ù…ØŸ')" style="margin: 5px; padding: 8px 15px;">ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù¾Ø§ÛŒØªÙˆÙ†</button>
                <button onclick="setQuestion('ØªÙØ§ÙˆØª AI Ùˆ ML Ú†ÛŒØ³ØªØŸ')" style="margin: 5px; padding: 8px 15px;">ØªÙØ§ÙˆØª AI Ùˆ ML</button>
                <button onclick="setQuestion('Ø¢ÛŒØ§ Ø³ÛŒØ³ØªÙ… Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ')" style="margin: 5px; padding: 8px 15px;">ØªØ³Øª Ø³ÛŒØ³ØªÙ…</button>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:3002/api/qna';
        
        function setQuestion(question) {
            document.getElementById('question').value = question;
        }
        
        async function askQuestion() {
            const question = document.getElementById('question').value.trim();
            const algorithm = document.querySelector('input[name="algorithm"]:checked').value;
            const resultContainer = document.getElementById('resultContainer');
            
            if (!question || question.length < 2) {
                alert('Ù„Ø·ÙØ§ Ø³ÙˆØ§Ù„ Ù…Ø¹ØªØ¨Ø±ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ø­Ø¯Ø§Ù‚Ù„ Û² Ú©Ø§Ø±Ø§Ú©ØªØ±)');
                return;
            }
            
            resultContainer.innerHTML = `
                <div class="loading">
                    <p>â³ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø³ÙˆØ§Ù„...</p>
                    <p><small>Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…: ${algorithm}</small></p>
                </div>
            `;
            
            try {
                const response = await fetch(`${API_BASE}/ask?q=${encodeURIComponent(question)}&algorithm=${algorithm}`);
                const data = await response.json();
                
                let resultHtml = '';
                
                if (data.success) {
                    resultHtml = `
                        <div class="result success">
                            <h3>âœ… Ù¾Ø§Ø³Ø® Ø³ÛŒØ³ØªÙ…:</h3>
                            <div style="white-space: pre-line; line-height: 1.6; margin: 15px 0; padding: 10px; background: white; border-radius: 5px;">
                                ${data.answer}
                            </div>
                            <div style="background: #e1f5fe; padding: 10px; border-radius: 5px; font-size: 14px;">
                                <strong>ğŸ“Š Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙÙ†ÛŒ:</strong><br>
                                Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…: ${data.algorithm || algorithm}<br>
                                Ø§Ø¹ØªÙ…Ø§Ø¯ Ø³ÛŒØ³ØªÙ…: ${data.confidence || 0}%<br>
                                Ù…Ù‚Ø§Ù„Ø§Øª ÛŒØ§ÙØª Ø´Ø¯Ù‡: ${data.articlesFound || 0}<br>
                                Ø²Ù…Ø§Ù† Ù¾Ø±Ø¯Ø§Ø²Ø´: ${data.processingTime || '?'} Ù…ÛŒÙ„ÛŒâ€ŒØ«Ø§Ù†ÛŒÙ‡<br>
                                ${data.matchedArticle ? `Ù…Ù‚Ø§Ù„Ù‡ Ø§ØµÙ„ÛŒ: ${data.matchedArticle}` : ''}
                            </div>
                        </div>
                    `;
                } else {
                    resultHtml = `
                        <div class="result error">
                            <h3>âŒ Ø®Ø·Ø§:</h3>
                            <p>${data.error || 'Ø®Ø·Ø§ÛŒ Ù†Ø§Ø´Ù†Ø§Ø®ØªÙ‡'}</p>
                            ${data.answer ? `<p>${data.answer}</p>` : ''}
                        </div>
                    `;
                }
                
                resultContainer.innerHTML = resultHtml;
                
            } catch (error) {
                resultContainer.innerHTML = `
                    <div class="result error">
                        <h3>âŒ Ø®Ø·Ø§ÛŒ Ø§Ø±ØªØ¨Ø§Ø·ÛŒ:</h3>
                        <p>${error.message}</p>
                        <p>Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ø³Ø±ÙˆØ± Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ø§Ø³Øª (Ù¾ÙˆØ±Øª 3002)</p>
                    </div>
                `;
            }
        }
        
        // ØªØ³Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ù†Ú¯Ø§Ù… Ù„ÙˆØ¯
        window.onload = function() {
            setTimeout(askQuestion, 500);
        };
    </script>
</body>
</html>
