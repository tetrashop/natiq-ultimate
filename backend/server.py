#!/usr/bin/env python3
"""
natiq-ultimate - ููุด ูุตููุน ูุงุฑุณ ุจุง ุฏุงูุด ูุงูุน
ูุณุฎู 3.1: ูพุงฺฏุงู ุฏุงูุด ุฌุงูุน ุจุง ูพุงุณุฎโูุง ูุงูุน
"""

from fastapi import FastAPI, HTTPException
from fastapi.middleware.cors import CORSMiddleware
from fastapi.responses import HTMLResponse, JSONResponse
import os
from datetime import datetime
import json
import random

app = FastAPI(
    title="natiq-ultimate",
    description="ููุด ูุตููุน ูุงุฑุณ ุจุง ุฏุงูุด ุฌุงูุน",
    version="3.1.0"
)

# CORS ุจุฑุง Vercel
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# ฺฉูุงุณ ููุด ูุตููุน ุจุง ุฏุงูุด ูุงูุน
class NatiqKnowledgeAI:
    def __init__(self):
        self.user_name = "ฺฉุงุฑุจุฑ"
        self.stats = {
            "questions_asked": 0,
            "topics_covered": [],
            "last_interaction": datetime.now().isoformat()
        }
        self.knowledge_base = self.load_knowledge_base()
    
    def load_knowledge_base(self):
        """ูพุงฺฏุงู ุฏุงูุด ูุงุฑุณ ุฌุงูุน"""
        return {
            # ููุถูุน: [ูพุงุณุฎโูุง ูุฑุชุจุท]
            "greetings": [
                "ุณูุงู! ุฎูุด ุขูุฏุฏ. ูู natiq-ultimate ูุณุชูุ ุฏุณุชุงุฑ ููุดููุฏ ูุงุฑุณ ุดูุง. ๐ค",
                "ุฏุฑูุฏ! ุฎูุดุญุงูู ฺฉู ุดูุง ุฑุง ูโุจูู. ฺุทูุฑ ูโุชูุงูู ฺฉูฺฉ ฺฉููุ",
                "ุณูุงู ุนุฒุฒ! ุขูุงุฏูโุงู ุจู ุณูุงูุงุช ุดูุง ูพุงุณุฎ ุฏูู.",
                "ุณูุงู ู ููุช ุจุฎุฑ! ูู ุงูุฌุงู ุชุง ุจู ุดูุง ฺฉูฺฉ ฺฉูู."
            ],
            "farewells": [
                "ุฎุฏุงุญุงูุธ! ูููู ุจุงุดุฏ. ๐",
                "ุจู ุงูุฏ ุฏุฏุงุฑ ูุฌุฏุฏ!",
                "ุฎุฏุงูฺฏูุฏุงุฑ! ุงฺฏุฑ ุณูุงู ุฏฺฏุฑ ุฏุงุฑุฏุ ุฏุฑ ุฎุฏูุชู.",
                "ุจุง ุขุฑุฒู ุจูุชุฑูโูุง ุจุฑุง ุดูุง! ุฎุฏุงุญุงูุธ."
            ],
            "name": [
                "ูู natiq-ultimate ูุณุชูุ ฺฉ ุฏุณุชุงุฑ ููุด ูุตููุน ูุงุฑุณ ฺฉู ุชูุณุท ุชู ุงุฒ ุชูุณุนูโุฏููุฏฺฏุงู ุงุฑุงู ุงุฌุงุฏ ุดุฏูโุงู.",
                "ุงุณู ูู natiq-ultimate ุงุณุช! ุฏุฑ ูุงุฑุณ ุจู ูุนูุง 'ฺฏูุง ููุง' ูุณุชู.",
                "ูู natiq-ultimate ูุงู ุฏุงุฑูุ ูุณุฎู ูพุดุฑูุชู ููุด ูุตููุน ูุงุฑุณ.",
                "ุจู ูู natiq-ultimate ูโฺฏููุฏ. ูุฃููุฑุช ูู ฺฉูฺฉ ุจู ฺฉุงุฑุจุฑุงู ูุงุฑุณโุฒุจุงู ุงุณุช."
            ],
            "creator": [
                "ูู ุชูุณุท ุชู ุงุฒ ุชูุณุนูโุฏููุฏฺฏุงู ุงุฑุงู ุนูุงููโููุฏ ุจู ููุด ูุตููุน ุงุฌุงุฏ ุดุฏูโุงู.",
                "ุชูุณุนูโุฏููุฏฺฏุงู ุงุฑุงู ูู ุฑุง ุจุง ุนุดู ุจู ุฒุจุงู ูุงุฑุณ ู ุชฺฉููููฺ ุณุงุฎุชูโุงูุฏ.",
                "ฺฉ ุชู ุจุฑูุงููโููุณ ุงุฑุงู ูู ุฑุง ุทุฑุงุญ ฺฉุฑุฏู ุชุง ุจู ุฌุงูุนู ูุงุฑุณโุฒุจุงู ุฎุฏูุช ฺฉูู.",
                "ุณุงุฒูุฏูโูุง ูู ุนุงุดูุงู ุชฺฉููููฺ ู ุฒุจุงู ูุงุฑุณ ูุณุชูุฏ!"
            ],
            "capabilities": [
                "ูู ูโุชูุงูู:\n\nโข ูพุงุณุฎ ุจู ุณูุงูุงุช ุนููู ู ุชุฎุตุต\nโข ุชุญูู ู ูพุฑุฏุงุฒุด ูุชู ูุงุฑุณ\nโข ุงุฑุงุฆู ุงุทูุงุนุงุช ุฏุฑ ููุถูุนุงุช ูุฎุชูู\nโข ฺฉูฺฉ ุฏุฑ ุจุฑูุงููโููุณ ู ุชฺฉููููฺ\nโข ฺฏูุชฺฏู ุชุนุงูู ู ุงุฏฺฏุฑ ูุฏุงูู\nโข ูพุงุณุฎ ุจู ุณูุงูุงุช ุนูู ู ุขููุฒุด",
                "ูุงุจูุชโูุง ุงุตู ูู:\n\n๐ ุขููุฒุด ู ูพุงุณุฎ ุจู ุณูุงูุงุช ุฏุฑุณ\n๐ป ฺฉูฺฉ ุฏุฑ ุจุฑูุงููโููุณ (Python, JavaScript, ...)\n๐ฌ ุงุทูุงุนุงุช ุนูู ู ุชฺฉููููฺ\n๐ ุชุญูู ุฏุงุฏู ู ุขูุงุฑ\n๐ ุงุทูุงุนุงุช ุนููู ู ุงุฎุจุงุฑ\n๐ฃ๏ธ ฺฏูุชฺฏู ุทุจุน ูุงุฑุณ",
                "ูู ุฏุฑ ุฒูููโูุง ุฒุฑ ูโุชูุงูู ฺฉูฺฉ ฺฉูู:\n\n1. ุจุฑูุงููโููุณ ู ุชูุณุนู ูุฑูโุงูุฒุงุฑ\n2. ููุด ูุตููุน ู ุงุฏฺฏุฑ ูุงุดู\n3. ุนููู ฺฉุงููพูุชุฑ\n4. ุชฺฉููููฺ ู ููุงูุฑโูุง ุฑูุฒ\n5. ุขููุฒุด ู ุงุฏฺฏุฑ\n6. ุชุญูู ู ูพุฑุฏุงุฒุด ุงุทูุงุนุงุช",
                "ุชูุงูุงโูุง ูู ุดุงูู:\n\nโ ูพุฑุฏุงุฒุด ุฒุจุงู ุทุจุน ูุงุฑุณ\nโ ูพุงุณุฎ ุจู ุณูุงูุงุช ูพฺุฏู\nโ ุงุฑุงุฆู ุฑุงูโุญูโูุง ุนูู\nโ ุชุญูู ูุณุงุฆู ุชฺฉูฺฉ\nโ ุขููุฒุด ููุงูู ุนูู\nโ ฺฉูฺฉ ุฏุฑ ุชุญููุงุช ู ูพุฑูฺูโูุง"
            ],
            "nlp_info": [
                "๐น **ุขุฎุฑู ูพุณุช ุตูุญู NLP**: ุดูุงุฑู 206\n๐ ุชุงุฑุฎ: ุฏโูุงู 1403\n๐ ููุถูุน: ูพุฑุฏุงุฒุด ุฒุจุงู ุทุจุน ูพุดุฑูุชู\nโ ูุถุนุช: ููุชุดุฑ ุดุฏู\n\nุงู ูพุณุช ุฌุงูุนโุชุฑู ูุทูุจ ุฏุฑ ุญูุฒู NLP ูุงุฑุณ ุงุณุช ู ุดุงูู:\nโข ูุฏูโูุง ุฒุจุงู ุฌุฏุฏ\nโข ูพุฑุฏุงุฒุด ูุชู ูุงุฑุณ\nโข ฺฉุชุงุจุฎุงููโูุง ุจูโุฑูุฒ\nโข ฺฉุงุฑุจุฑุฏูุง ุนูู",
                "ุฏุฑ ููุฑุฏ ุตูุญู NLP: ุขุฎุฑู ูพุณุช ุจุง ุดูุงุฑู 206 ููุชุดุฑ ุดุฏู ุงุณุช ู ุญุงู ูุทุงูุจ ุฏุฑุจุงุฑู:\n\nโข ุชุญููุงุช ุงุฎุฑ ุฏุฑ ูพุฑุฏุงุฒุด ุฒุจุงู ูุงุฑุณ\nโข ุงุจุฒุงุฑูุง ู ฺฉุชุงุจุฎุงููโูุง ุฌุฏุฏ\nโข ฺฉุงุฑุจุฑุฏูุง ุนูู ุฏุฑ ูพุฑูฺูโูุง ูุงูุน\nโข ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ ูุฏูโูุง ูุงุฑุณ",
                "ูพุณุช ุดูุงุฑู 206 ุตูุญู NLP ุจุง ููุถูุน 'ูพุฑุฏุงุฒุด ุฒุจุงู ุทุจุน ูพุดุฑูุชู' ููุชุดุฑ ุดุฏู. ูุญุชูุง ุงุตู:\n\n๐ ูพุดุฑูุชโูุง ุงุฎุฑ ุฏุฑ NLP ูุงุฑุณ\n๐๏ธ ุงุจุฒุงุฑูุง ฺฉุงุฑุจุฑุฏ ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู\n๐ ุชุญูู ุนููฺฉุฑุฏ ูุฏูโูุง ูุฎุชูู\n๐ฏ ฺฉุงุฑุจุฑุฏูุง ุตูุนุช ู ุชุญููุงุช",
                "ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู ุตูุญู NLP: ูพุณุช ุดูุงุฑู 206 ููุชุดุฑ ุดุฏู ู ุดุงูู:\n\nโจ ูฺฺฏโูุง ุฌุฏุฏ ูพุฑุฏุงุฒุดฺฏุฑูุง ูุงุฑุณ\n๐ง ุฑุงูโุงูุฏุงุฒ ูุฏูโูุง ุจููู ุดุฏู\n๐ ููุงุณู ุงูฺฏูุฑุชูโูุง ูุฎุชูู\n๐ก ูุซุงูโูุง ุนูู ู ฺฉุฏูุง ูุงุจู ุงุณุชูุงุฏู"
            ],
            "ai_definition": [
                "๐ค **ููุด ูุตููุน ฺุณุชุ**\n\nููุด ูุตููุน (AI) ุดุงุฎูโุง ุงุฒ ุนููู ฺฉุงููพูุชุฑ ุงุณุช ฺฉู ุจู ุงุฌุงุฏ ุณุณุชูโูุง ูโูพุฑุฏุงุฒุฏ ฺฉู ูโุชูุงููุฏ ูุธุงู ุฑุง ุงูุฌุงู ุฏููุฏ ฺฉู ูุนูููุงู ุจู ููุด ุงูุณุงู ูุงุฒ ุฏุงุฑูุฏ. ุงู ุดุงูู:\n\nโข ุงุฏฺฏุฑ ูุงุดู (Machine Learning)\nโข ูพุฑุฏุงุฒุด ุฒุจุงู ุทุจุน (NLP)\nโข ุจูุง ฺฉุงููพูุชุฑ (Computer Vision)\nโข ุณุณุชูโูุง ุชูุตูโฺฏุฑ (Recommendation Systems)\nโข ุฑุจุงุชฺฉ (Robotics)\n\nููุด ูุตููุน ุฏุฑ ุชุดุฎุต ุชุตูุฑุ ุชุฑุฌูู ูุงุดูุ ุฏุณุชุงุฑูุง ุตูุชุ ูพุฒุดฺฉุ ูุงู ู ุจุณุงุฑ ุฒูููโูุง ุฏฺฏุฑ ฺฉุงุฑุจุฑุฏ ุฏุงุฑุฏ.",
                "**ุชุนุฑู ููุด ูุตููุน**:\n\nููุด ูุตููุน ุนูู ู ูููุฏุณ ุณุงุฎุช ูุงุดูโูุง ููุดููุฏ ุงุณุชุ ุจู ูฺู ุจุฑูุงููโูุง ฺฉุงููพูุชุฑ ููุดููุฏ. ููุด ูุตููุน ุจุง ูุทุงูุนู ุงูฺฉู ฺฺฏููู ูุบุฒ ุงูุณุงู ูฺฉุฑ ูโฺฉูุฏุ ุงุฏ ูโฺฏุฑุฏ ู ุชุตูู ูโฺฏุฑุฏุ ุณุน ุฏุฑ ุจูุจูุฏ ุนููฺฉุฑุฏ ฺฉุงููพูุชุฑูุง ุฏุงุฑุฏ.\n\nุงููุงุน ููุด ูุตููุน:\n1. ููุด ูุตููุน ูุญุฏูุฏ (Narrow AI) - ูุซู ุฏุณุชุงุฑูุง ุตูุช\n2. ููุด ูุตููุน ุนููู (AGI) - ููุด ุงูุณุงูโฺฏููู\n3. ููุด ูุตููุน ูุฑุงุจุดุฑ (Superintelligence)",
                "ููุด ูุตููุน ุจู ุณุณุชูโูุง ฺฏูุชู ูโุดูุฏ ฺฉู ุชูุงูุง ุชูุณุฑ ุฏุงุฏูโูุงุ ุงุฏฺฏุฑ ุงุฒ ุฏุงุฏูโูุง ู ุงุณุชูุงุฏู ุงุฒ ุขู ุฏุงูุด ุจุฑุง ุฏุณุชุงุจ ุจู ุงูุฏุงู ุฎุงุต ุฑุง ุฏุงุฑูุฏ.\n\nูุซุงูโูุง ฺฉุงุฑุจุฑุฏ:\nโ ChatGPT - ฺฏูุชฺฏู ููุดููุฏ\nโ ุณุณุชูโูุง ุชุดุฎุต ฺูุฑู\nโ ูุงุดูโูุง ุฎูุฏุฑุงู\nโ ุชุดุฎุต ุจูุงุฑโูุง ุฏุฑ ูพุฒุดฺฉ\nโ ุชุฑุฌูู ุฎูุฏฺฉุงุฑ ูุชูู\nโ ูพุดโุจู ุจุงุฒุงุฑูุง ูุงู",
                "ููุด ูุตููุน (Artificial Intelligence) ููุงูุฑ ุงุณุช ฺฉู ุจู ูุงุดูโูุง ุชูุงูุง ุดุจูโุณุงุฒ ููุด ุงูุณุงู ุฑุง ูโุฏูุฏ. ุดุงูู:\n\n๐ง **ุงุฏฺฏุฑ**: ุชูุงูุง ุจูุจูุฏ ุนููฺฉุฑุฏ ุจุฑ ุงุณุงุณ ุชุฌุฑุจู\n๐ค **ุงุณุชุฏูุงู**: ุชูุงูุง ุญู ูุณุงุฆู ูพฺุฏู\n๐ฌ **ุฏุฑฺฉ ุฒุจุงู**: ูพุฑุฏุงุฒุด ู ุฏุฑฺฉ ุฒุจุงู ุทุจุน\n๐๏ธ **ุฏุฑฺฉ ุจุตุฑ**: ุชุดุฎุต ู ุชูุณุฑ ุชุตุงูุฑ\n๐ฏ **ุชุตููโฺฏุฑ**: ุงูุชุฎุงุจ ุจูุชุฑู ุงูุฏุงู"
            ],
            "programming": [
                "๐ป **ุจุฑูุงููโููุณ** ููุฑ ููุดุชู ุฏุณุชูุฑุงูุนููโูุง ุงุณุช ฺฉู ฺฉุงููพูุชุฑ ูโุชูุงูุฏ ุงุฌุฑุง ฺฉูุฏ. ุฒุจุงูโูุง ูุญุจูุจ:\n\nโข ูพุงุชูู (Python) - ุจุฑุง ููุด ูุตููุน ู ุฏุงุฏู\nโข ุฌุงูุงุงุณฺฉุฑูพุช (JavaScript) - ุจุฑุง ูุจ\nโข ุฌุงูุง (Java) - ุจุฑุง ุงูพูฺฉุดูโูุง ุณุงุฒูุงู\nโข C++ - ุจุฑุง ุณุณุชูโูุง ุจุง ฺฉุงุฑุง ุจุงูุง\nโข C# - ุจุฑุง ุชูุณุนู ุจุงุฒ ู ููุฏูุฒ\n\nุจุฑุง ุดุฑูุนุ ูพุงุชูู ุชูุตู ูโุดูุฏ ฺูู ุณุงุฏู ู ูุฏุฑุชููุฏ ุงุณุช.",
                "ุจุฑูุงููโููุณ ุนู ุฏุงุฏู ุฏุณุชูุฑ ุจู ฺฉุงููพูุชุฑ ุจุฑุง ุงูุฌุงู ฺฉุงุฑูุง ุฎุงุต. ูุฑุงุญู ุงุฏฺฏุฑ:\n\n1. ุงูุชุฎุงุจ ุฒุจุงู ููุงุณุจ (Python ุจุฑุง ุดุฑูุน ุนุงู ุงุณุช)\n2. ุงุฏฺฏุฑ ููุงูู ูพุงู (ูุชุบุฑูุงุ ุดุฑุทุ ุญููู)\n3. ุชูุฑู ูพุฑูฺูโูุง ฺฉูฺฺฉ\n4. ุงุฏฺฏุฑ ุงูฺฏูุฑุชู ู ุณุงุฎุชุงุฑ ุฏุงุฏู\n5. ุณุงุฎุช ูพุฑูฺูโูุง ูุงูุน\n\nููุงุจุน ุฑุงฺฏุงู: Codecademy, freeCodeCamp, W3Schools",
                "ุจุฑูุงููโููุณ ููุงุฑุช ุงุณุช ฺฉู ุฏุฑ ุฏูุง ุงูุฑูุฒ ุจุณุงุฑ ุงุฑุฒุดููุฏ ุงุณุช. ฺฉุงุฑุจุฑุฏูุง:\n\n๐ธ๏ธ ุชูุณุนู ูุจุณุงุช ู ุงูพูฺฉุดู\n๐ฑ ุณุงุฎุช ุจุฑูุงููโูุง ููุจุงู\n๐ฎ ุชูุณุนู ุจุงุฒโูุง ฺฉุงููพูุชุฑ\n๐ค ุงุฌุงุฏ ุณุณุชูโูุง ููุด ูุตููุน\n๐ ุชุญูู ุฏุงุฏู ู ุนูู ุฏุงุฏู\n๐ ุงููุช ุณุงุจุฑ\n\nุดุฑูุน ฺฉูุฏ ู ุฏูุง ุฌุฏุฏ ุฑุง ฺฉุดู ฺฉูุฏ!"
            ],
            "machine_learning": [
                "๐ค **ุงุฏฺฏุฑ ูุงุดู (Machine Learning)** ุฒุฑุดุงุฎูโุง ุงุฒ ููุด ูุตููุน ุงุณุช ฺฉู ุจู ฺฉุงููพูุชุฑูุง ุชูุงูุง ุงุฏฺฏุฑ ุงุฒ ุฏุงุฏูโูุง ุจุฏูู ุจุฑูุงููโููุณ ุตุฑุญ ุฑุง ูโุฏูุฏ.\n\nุงููุงุน ุงุตู:\n\n1. **ุงุฏฺฏุฑ ูุธุงุฑุช ุดุฏู** (Supervised Learning) - ุจุง ุฏุงุฏูโูุง ุจุฑฺุณุจโุฏุงุฑ\n2. **ุงุฏฺฏุฑ ุจุฏูู ูุธุงุฑุช** (Unsupervised Learning) - ฺฉุดู ุงูฺฏู ุฏุฑ ุฏุงุฏูโูุง ุจุฏูู ุจุฑฺุณุจ\n3. **ุงุฏฺฏุฑ ุชููุช** (Reinforcement Learning) - ุงุฏฺฏุฑ ุงุฒ ุทุฑู ูพุงุฏุงุด ู ุฌุฑูู\n\nฺฉุงุฑุจุฑุฏูุง: ุชุดุฎุต ุชุตูุฑุ ูพุดโุจู ููุชุ ุชูุตู ูุญุตููุ ุชุดุฎุต ุชููุจ",
                "ุงุฏฺฏุฑ ูุงุดู ุนูู ุงุณุช ฺฉู ฺฉุงููพูุชุฑูุง ุฑุง ูุงุฏุฑ ูโุณุงุฒุฏ ุจุฏูู ุงูฺฉู ุตุฑุญุงู ุจุฑูุงููโุฑุฒ ุดุฏู ุจุงุดูุฏุ ุงุฒ ุชุฌุฑุจู ุงุฏ ุจฺฏุฑูุฏ.\n\nุงูฺฏูุฑุชูโูุง ูุนุฑูู:\nโข ุฑฺฏุฑุณูู ุฎุท (Linear Regression)\nโข ุฏุฑุฎุช ุชุตูู (Decision Tree)\nโข ุดุจฺฉูโูุง ุนุตุจ (Neural Networks)\nโข ูุงุดู ุจุฑุฏุงุฑ ูพุดุชุจุงู (SVM)\nโข ุฎูุดูโุจูุฏ K-means\n\nุงุจุฒุงุฑูุง: TensorFlow, PyTorch, scikit-learn",
                "ุงุฏฺฏุฑ ูุงุดู ุฏุฑ ุจุณุงุฑ ุงุฒ ุฒูููโูุง ุชุญูู ุงุฌุงุฏ ฺฉุฑุฏู:\n\n๐ฅ ูพุฒุดฺฉ: ุชุดุฎุต ุจูุงุฑโูุง\n๐ฐ ูุงู: ุงุฑุฒุงุจ ุฑุณฺฉ ู ุณุฑูุงูโฺฏุฐุงุฑ\n๐๏ธ ุชุฌุงุฑุช: ุณุณุชูโูุง ุชูุตูโฺฏุฑ\n๐ ุฎูุฏุฑู: ูุงุดูโูุง ุฎูุฏุฑุงู\n๐ ุฌุณุชุฌู: ุจูุจูุฏ ูุชุงุฌ ุฌุณุชุฌู\n๐ต ููุณู: ูพุดููุงุฏ ููุฒฺฉ\n\nุจุฑุง ุดุฑูุนุ ุงุฏฺฏุฑ ูพุงุชูู ู ฺฉุชุงุจุฎุงูู scikit-learn ุชูุตู ูโุดูุฏ."
            ],
            "python": [
                "๐ **ูพุงุชูู (Python)** ฺฉ ุฒุจุงู ุจุฑูุงููโููุณ ุณุทุญ ุจุงูุงุ ููุณุฑ ู ูููโููุธูุฑู ุงุณุช ฺฉู ุฏุฑ ุณุงู 1991 ุงุฌุงุฏ ุดุฏ.\n\nูฺฺฏโูุง:\nโข ุณุงุฏู ู ุฎูุงูุง\nโข ฺฉุชุงุจุฎุงููโูุง ุบู\nโข ุฌุงูุนู ุจุฒุฑฺฏ\nโข ูููโฺฉุงุฑู\n\nฺฉุงุฑุจุฑุฏูุง:\nโ ุชูุณุนู ูุจ (Django, Flask)\nโ ุนูู ุฏุงุฏู ู ููุด ูุตููุน\nโ ุงุณฺฉุฑูพุชโููุณ\nโ ุงุชููุงุณูู\nโ ุชูุณุนู ุจุงุฒ\n\nูุซุงู ฺฉุฏ ุณุงุฏู:\n```python\nprint('ุณูุงู ุฏูุง!')\nname = input('ุงุณูุช ฺูุ ')\nprint(f'ุณูุงู {name}!')\n```",
                "ูพุงุชูู ูุญุจูุจโุชุฑู ุฒุจุงู ุจุฑุง ุนูู ุฏุงุฏู ู ููุด ูุตููุน ุงุณุช. ุฏูุงู ูุญุจูุจุช:\n\n1. **ุณุงุฏฺฏ**: ูุญู (syntax) ุชูุฒ ู ุฎูุงูุง\n2. **ฺฉุชุงุจุฎุงููโูุง**: NumPy, Pandas, TensorFlow, PyTorch\n3. **ุฌุงูุนู**: ููููโูุง ุชูุณุนูโุฏููุฏู\n4. **ฺูุฏูพูุชูุฑู**: ุงุฌุฑุง ุฑู ููุฏูุฒุ ูฺฉุ ูููฺฉุณ\n5. **ุฑุงฺฏุงู**: ฺฉุงููุงู ุงููพูโุณูุฑุณ\n\nูพุงุชูู ุจุฑุง ูุจุชุฏุงู ุนุงู ุงุณุช ู ุจุงุฒุงุฑ ฺฉุงุฑ ุฎูุจ ุฏุงุฑุฏ.",
                "ูพุงุชูู ุฏุฑ ุฒูููโูุง ูุฎุชูู ุงุณุชูุงุฏู ูโุดูุฏ:\n\n๐ **ุนูู ุฏุงุฏู**: ุชุญูู ุฏุงุฏูุ ูุตูุฑุณุงุฒ\n๐ค **ููุด ูุตููุน**: ุงุฏฺฏุฑ ูุงุดูุ ูพุฑุฏุงุฒุด ุฒุจุงู\n๐ **ุชูุณุนู ูุจ**: ูุฑููุฑฺฉโูุง Django ู Flask\n๐ง **ุงุชููุงุณูู**: ุฎูุฏฺฉุงุฑุณุงุฒ ฺฉุงุฑูุง ุชฺฉุฑุงุฑ\n๐ฎ **ุชูุณุนู ุจุงุฒ**: ุจุง ฺฉุชุงุจุฎุงูู PyGame\n๐ฑ **ุงูพูฺฉุดู ููุจุงู**: ุจุง Kivy ุง BeeWare\n\nุดุฑูุน ุงุฏฺฏุฑ ูพุงุชูู ฺฉ ุงุฒ ุจูุชุฑู ุชุตููุงุช ุจุฑุง ูุฑูุฏ ุจู ุฏูุง ุจุฑูุงููโููุณ ุงุณุช."
            ],
            "technology": [
                "๐ฑ **ุชฺฉููููฺ** ุจู ูุฌููุนู ุงุจุฒุงุฑูุงุ ูุงุดูโูุงุ ุชฺฉูฺฉโูุง ู ูุฑุขูุฏูุง ฺฏูุชู ูโุดูุฏ ฺฉู ุจุฑุง ุญู ูุดฺฉูุงุช ุง ุงูุฌุงู ูุธุงู ุฎุงุต ุงุณุชูุงุฏู ูโุดููุฏ.\n\nุฑููุฏูุง ููู ุชฺฉููููฺ ุฏุฑ 2024:\n\n1. **ููุด ูุตููุน ูููุฏ** (Generative AI)\n2. **ูุญุงุณุจุงุช ฺฉูุงูุชูู**\n3. **ุงูุชุฑูุช ุงุดุง** (IoT)\n4. **ุจูุงฺฉฺู ู Web3**\n5. **ูุชุงูุฑุณ**\n6. **ุฎูุฏุฑููุง ุฎูุฏุฑุงู**\n7. **ุจูุชฺฉููููฺ ุฏุฌุชุงู**",
                "ุชฺฉููููฺ ุฏุฑ ุญุงู ุชุบุฑ ุฒูุฏฺฏ ูุงุณุช. ููุขูุฑโูุง ุงุฎุฑ:\n\n๐ค **ุฑุจุงุชฺฉ ูพุดุฑูุชู**: ุฑุจุงุชโูุง ุงูุณุงูโููุง\n๐งฌ **ูุฑุงุด ฺู**: ุชฺฉููููฺ CRISPR\n๐ **ุงูุฑฺ ูพุงฺฉ**: ุณูููโูุง ุฎูุฑุดุฏ ฺฉุงุฑุขูุฏุชุฑ\n๐ **ูุถุง**: ุชูุฑุณู ูุถุง\n๐ **ูพุฒุดฺฉ ุฏุฌุชุงู**: ุชุดุฎุต ุจูุงุฑ ุจุง AI\n๐ **ุฎุงููโูุง ููุดููุฏ**: ฺฉูุชุฑู ุจุง ุตุฏุง ู ุงูพูฺฉุดู",
                "ุชฺฉููููฺโูุง ุขูุฏู ฺฉู ุจุงุฏ ูุฑุงูุจุดุงู ุจูุฏ:\n\nโข **ููุด ูุตููุน ุนููู** (AGI)\nโข **ุงุชุตุงู ูุบุฒ-ฺฉุงููพูุชุฑ**\nโข **ูพุฑูุช ุณูโุจุนุฏ ุงุนุถุง ู ุจุงูุชโูุง**\nโข **ุดูุฑูุง ููุดููุฏ ฺฉุงููุงู ุฎูุฏฺฉุงุฑ**\nโข **ููุงูพูุงูุง ุจุฑู**\nโข **ฺฉุดุงูุฑุฒ ุนููุฏ ู ููุดููุฏ**\n\nุชฺฉููููฺ ูู ูุฑุตุช ุงุณุช ู ูู ฺุงูุด. ุจุงุฏ ูุณุฆููุงูู ุงุณุชูุงุฏู ุดูุฏ."
            ],
            "education": [
                "๐ **ุขููุฒุด** ูุฑุขูุฏ ุชุณูู ุงุฏฺฏุฑ ุงุณุช. ุฏุฑ ุนุตุฑ ุฏุฌุชุงูุ ุขููุฒุด ูุชุญูู ุดุฏู:\n\nโข **ุงุฏฺฏุฑ ุขููุงู**: ุฏูุฑูโูุง MOOC\nโข **ุขููุฒุด ุชุนุงูู**: ูพูุชูุฑูโูุง ูุงููุฏ Khan Academy\nโข **ุงุฏฺฏุฑ ุชุทุจู**: ุณุณุชูโูุง ฺฉู ุจุง ุณุฑุนุช ุงุฏฺฏุฑูุฏู ุชูุธู ูโุดููุฏ\nโข **ูุงูุนุช ูุฌุงุฒ ุฏุฑ ุขููุฒุด**: ุชุฌุฑุจุงุช ุงุฏฺฏุฑ ุบูุทูโูุฑ\n\nูููุชุฑู ููุงุฑุชโูุง ูุฑู 21:\n1. ุชูฺฉุฑ ุงูุชูุงุฏ\n2. ุฎูุงูุช\n3. ููฺฉุงุฑ\n4. ุณูุงุฏ ุฏุฌุชุงู\n5. ุงูุนุทุงูโูพุฐุฑ",
                "ุงุฏฺฏุฑ ูุงุฏุงูโุงูุนูุฑ ุฏุฑ ุฏูุง ุงูุฑูุฒ ุถุฑูุฑ ุงุณุช. ุฑุงูโูุง ููุซุฑ ุงุฏฺฏุฑ:\n\n๐ **ุฎูุงูุฏู ูุนุงู**: ุจุง ุณูุงู ู ุฎูุงุตูโููุณ\n๐ฅ **ุขููุฒุด ูุฏุฆู**: ุงุฒ YouTube ู ูพูุชูุฑูโูุง ุขููุฒุด\n๐ป **ุชูุฑู ุนูู**: ูพุฑูฺูโูุง ูุงูุน\n๐ฅ **ุงุฏฺฏุฑ ุงุฌุชูุงุน**: ฺฏุฑููโูุง ูุทุงูุนู\n๐ **ูุฑูุฑ ููุธู**: ุงุณุชูุงุฏู ุงุฒ ุชฺฉุฑุงุฑูุง ูุงุตููโุฏุงุฑ\n\nุจูุชุฑู ุณุฑูุงูโฺฏุฐุงุฑุ ุณุฑูุงูโฺฏุฐุงุฑ ุฑู ุฎูุฏุชุงู ุงุณุช!",
                "ุขููุฒุด ุฏุฌุชุงู ูุฒุงุง ุฒุงุฏ ุฏุงุฑุฏ:\n\nโ ุฏุณุชุฑุณ ุฌูุงู\nโ ูุฒูู ฺฉูุชุฑ\nโ ุงูุนุทุงู ุฒูุงู\nโ ูุญุชูุง ุจูโุฑูุฒ\nโ ุงุฏฺฏุฑ ุดุฎุตโุณุงุฒ ุดุฏู\n\nูพูุชูุฑูโูุง ุขููุฒุด ุจุฑุชุฑ:\nโข Coursera\nโข edX\nโข Udemy\nโข Khan Academy\nโข LinkedIn Learning\nโข ุงุฑุงูโููุงุฑุช"
            ],
            "business": [
                "๐ผ **ฺฉุณุจโูฺฉุงุฑ** ุฏุฑ ุนุตุฑ ุฏุฌุชุงู:\n\nุฑููุฏูุง ููู:\nโข ุชุฌุงุฑุช ุงูฺฉุชุฑููฺฉ\nโข ุจุงุฒุงุฑุงุจ ุฏุฌุชุงู\nโข ฺฉุงุฑ ุงุฒ ุฑุงู ุฏูุฑ\nโข ุงูุชุตุงุฏ ฺฏฺฏ (Gig Economy)\nโข ฺฉุณุจโูฺฉุงุฑูุง ูุจุชู ุจุฑ ุงุดุชุฑุงฺฉ\n\nููุงุฑุชโูุง ููุฑุฏ ูุงุฒ ุจุฑุง ฺฉุงุฑุขูุฑู:\n1. ุชูฺฉุฑ ุงุณุชุฑุงุชฺฺฉ\n2. ูุฏุฑุช ูุงู\n3. ุจุงุฒุงุฑุงุจ ุฏุฌุชุงู\n4. ุฑูุจุฑ ุชู\n5. ุชุญูู ุฏุงุฏู",
                "ุงุณุชุงุฑุชุงูพโูุง ููุชูุฑ ููุขูุฑ ุงูุชุตุงุฏ ูุณุชูุฏ. ูุฑุงุญู ุฑุดุฏ ุงุณุชุงุฑุชุงูพ:\n\n1. **ุงุฏูโูพุฑุฏุงุฒ**: ุดูุงุณุง ูุดฺฉู ู ุฑุงูโุญู\n2. **ุชูุณุฏูโุฏู** (MVP): ุณุงุฎุช ุญุฏุงูู ูุญุตูู ูุงุจู ุงุฑุงุฆู\n3. **ุงุนุชุจุงุฑุณูุฌ**: ุชุณุช ุจุงุฒุงุฑ\n4. **ููุงุณโูพุฐุฑ**: ุฑุดุฏ ฺฉุณุจโูฺฉุงุฑ\n5. **ุจููุบ**: ุชุซุจุช ูููุนุช ุฏุฑ ุจุงุฒุงุฑ\n\nููุงุจุน ุณุฑูุงูโฺฏุฐุงุฑ: ุดุชุงุจโุฏููุฏูโูุงุ ุณุฑูุงูโฺฏุฐุงุฑุงู ุฎุทุฑูพุฐุฑุ ฺฉุฑุงุฏูุงูุฏูฺฏ",
                "ฺฉุณุจโูฺฉุงุฑูุง ูููู ุฏุฑ ุฏูุง ุฏุฌุชุงู ูฺฺฏโูุง ูุดุชุฑฺฉ ุฏุงุฑูุฏ:\n\n๐ **ุชูุฑฺฉุฒ ุจุฑ ูุดุชุฑ**: ุฏุฑฺฉ ุนูู ูุงุฒูุง ูุดุชุฑ\n๐ **ฺุงุจฺฉ**: ุชูุงูุง ุณุงุฒฺฏุงุฑ ุณุฑุน\n๐ **ุฏุงุฏูโูุญูุฑ**: ุชุตููโฺฏุฑ ุจุฑ ุงุณุงุณ ุฏุงุฏู\n๐ก **ููุขูุฑ ูุฏุงูู**: ุจูุจูุฏ ูุณุชูุฑ ูุญุตูู\n๐ค **ุชู ูู**: ุงุณุชุฎุฏุงู ุงูุฑุงุฏ ุจุงุงุณุชุนุฏุงุฏ\n๐ **ุจุงุฒุงุฑ ุฌูุงู**: ุชูฺฉุฑ ูุฑุงุชุฑ ุงุฒ ูุฑุฒูุง"
            ],
            "health": [
                "๐ฅ **ุณูุงูุช** ุฏุฑ ุนุตุฑ ุชฺฉููููฺ:\n\nููุขูุฑโูุง ุญูุฒู ุณูุงูุช:\nโข ูพุฒุดฺฉ ุงุฒ ุฑุงู ุฏูุฑ (Telemedicine)\nโข ูพูุดุฏูโูุง ุณูุงูุช (Fitbit, Apple Watch)\nโข ุชุดุฎุต ุจูุงุฑ ุจุง ููุด ูุตููุน\nโข ูพุฑููุฏู ุณูุงูุช ุงูฺฉุชุฑููฺฉ\nโข ุฌุฑุงุญ ุฑุจุงุชฺฉ\nโข ุฏุงุฑููุง ุดุฎุตโุณุงุฒ ุดุฏู\n\nุชูุตูโูุง ุณูุงูุช ุฏุฌุชุงู:\n1. ุงุณุชูุงุฏู ุงุฒ ุงูพูฺฉุดูโูุง ุฑุฏุงุจ ุณูุงูุช\n2. ูุดุงูุฑู ุขููุงู ุจุง ูพุฒุดฺฉ\n3. ุฏุณุชุฑุณ ุจู ุงุทูุงุนุงุช ุณูุงูุช ูุนุชุจุฑ\n4. ุงุณุชูุงุฏู ุงุฒ ุฏุณุชฺฏุงูโูุง ูุงูุชูุฑูฺฏ ุฎุงูฺฏ",
                "ุณูุงูุช ุฏุฌุชุงู (Digital Health) ุฒูุฏฺฏ ูุง ุฑุง ูุชุญูู ฺฉุฑุฏู:\n\n๐ฑ **ุงูพูฺฉุดูโูุง ุณูุงูุช**: ุฑุฏุงุจ ูุฑุฒุดุ ุฎูุงุจุ ุชุบุฐู\n๐ **ุฏุงุฑูุฎุงููโูุง ุขููุงู**: ุชุญูู ุฏุงุฑู ุฏุฑ ูุญู\n๐ง **ุณูุงูุช ุฑูุงู ุฏุฌุชุงู**: ุงูพูฺฉุดูโูุง ูุฏุชุดู ู ูุดุงูุฑู\n๐ **ูุชูุณ ุขููุงู**: ฺฉูุงุณโูุง ูุฑุฒุด ุฒูุฏู\n๐ **ุชุบุฐู ููุดููุฏ**: ุจุฑูุงููโุฑุฒ ุฑฺู ุดุฎุตโุณุงุฒ ุดุฏู\n\nูพุดฺฏุฑ ุจูุชุฑ ุงุฒ ุฏุฑูุงู ุงุณุช!",
                "ุชฺฉููููฺโูุง ุขูุฏู ุฏุฑ ุณูุงูุช:\n\nโข **ฺุงูพ ุณูโุจุนุฏ ุงุนุถุง**\nโข **ูุงูููพุฒุดฺฉ**\nโข **ูุฑุงุด ฺููู ุจุฑุง ุฏุฑูุงู ุจูุงุฑโูุง**\nโข **ุงููพููุชโูุง ุนุตุจ**\nโข **ุฑุจุงุชโูุง ูพุฑุณุชุงุฑ**\nโข **ุชุดุฎุต ุจูุงุฑ ุงุฒ ุทุฑู ุชููุณ**\n\nูุฑุงูุจุช ูพุดฺฏุฑุงูู ู ุดุฎุตโุณุงุฒ ุดุฏู ุขูุฏู ูพุฒุดฺฉ ุงุณุช."
            ],
            "jokes": [
                "ฺุฑุง ฺฉุงููพูุชุฑ ููโุชูุงูุฏ ุฏุฑูุบ ุจฺฏูุฏุ ฺูู ููุดู ุญููุช ุฑุง ุจุงุช ูโฺฉูุฏ! ๐",
                "ุฏู ุชุง ุตูุฑ ุจุง ูู ุฏุนูุง ฺฉุฑุฏู... ูุฑ ุฏู ุจุงุฎุชูุฏ! ๐คญ",
                "ุงูฺฏูุฑุชู ูุงุฑุฏ ฺฉุงูู ุดุฏ ู ฺฏูุช: 'ูู ูุฑุชุจ ูโุดูู!' ๐ซข",
                "ฺุฑุง ุจุฑูุงููโููุณ ุงุฒ ุทุจุนุช ุจุฏุด ูโุขูุฏุ ฺูู ุจุงฺฏ ุฏุงุดุช! ๐",
                "ฺุฑุง ุฑุงุถุฏุงูุงู ุจุฏ ุฎูุงุจุฏูุ ฺูู ุฏุงุฆูุงู ุฏุฑ ุฑุฎุชุฎูุงุจ ูุนุงุฏูู ุญู ูโฺฉุฑุฏู! ๐",
                "ฺุฑุง ููุชูุฑ ุฌุณุชุฌู ุจู ุฏฺฉุชุฑ ูุฑุงุฌุนู ฺฉุฑุฏุ ฺูู ูุชุงุฌุด ุฎูุจ ูุจูุฏ! ๐",
                "ุฏู ุชุง ุจุช ุจุง ูู ุงุฒุฏูุงุฌ ฺฉุฑุฏู. ูุฑุงุณู ุนุฑูุณ ุดูู ุฎู ููุทู ุจูุฏ! ๐ป",
                "ฺุฑุง ุฏุงุฏูโูุง ุจู ูุดุงูุฑ ุงุฒุฏูุงุฌ ูุฑุงุฌุนู ฺฉุฑุฏูุ ฺูู ุฑุงุจุทูโุดูู ฺฏุณุณุชู ุจูุฏ! ๐"
            ],
            "learning": [
                "ุจูู! ูู ุฏุงุฆูุงู ุฏุฑ ุญุงู ุงุฏฺฏุฑ ูุณุชู. ูุฑ ฺฏูุชฺฏู ุจู ูู ฺฉูฺฉ ูโฺฉูุฏ ุจูุชุฑ ุดูู.",
                "ูุทุนุงู! ุณุณุชู ูู ุจุฑ ูพุงู ุงุฏฺฏุฑ ูุฏุงูู ุทุฑุงุญ ุดุฏู ุงุณุช.",
                "ุขุฑูุ ุจุง ูุฑ ุชุนุงูู ฺุฒูุง ุฌุฏุฏ ุงุฏ ูโฺฏุฑู.",
                "ุงุฏฺฏุฑ ุจุฎุด ุฌุฏุงโูุงูพุฐุฑ ูู ุงุณุช. ูุฑ ุฑูุฒ ุจูุชุฑ ุงุฒ ุฏุฑูุฒ ูโุดูู!",
                "ุงุฏฺฏุฑ ูู ุงุฒ ฺูุฏ ุทุฑู ุงุณุช:\n1. ุชุนุงูู ุจุง ฺฉุงุฑุจุฑุงู\n2. ุจูโุฑูุฒุฑุณุงู ูพุงฺฏุงู ุฏุงูุด\n3. ุชุญูู ุงูฺฏููุง ฺฏูุชฺฏู\n4. ุจูุจูุฏ ุงูฺฏูุฑุชูโูุง ูพุฑุฏุงุฒุด ุฒุจุงู\n\nูุฏู ูู ุงู ุงุณุช ฺฉู ููุดู ูพุงุณุฎโูุง ููุฏุชุฑ ุงุฑุงุฆู ุฏูู."
            ],
            "help": [
                "ูู ูโุชูุงูู ุฏุฑ ุฒูููโูุง ุฒุฑ ฺฉูฺฉ ฺฉูู:\n\nโข ูพุงุณุฎ ุจู ุณูุงูุงุช ุนููู ู ุชุฎุตุต\nโข ุขููุฒุด ููุงูู ุจุฑูุงููโููุณ\nโข ุงุทูุงุนุงุช ุฏุฑุจุงุฑู ููุด ูุตููุน ู ุชฺฉููููฺ\nโข ุฑุงูููุง ุฏุฑ ูพุฑูฺูโูุง ุนูู\nโข ูพุงุณุฎ ุจู ุณูุงูุงุช ุฏุฑุณ\nโข ูุดุงูุฑู ุฏุฑ ุงูุชุฎุงุจ ูุณุฑ ุดุบู\n\nูุทูุงู ุณูุงู ุฎูุฏ ุฑุง ุฏููโุชุฑ ุจูพุฑุณุฏ ุชุง ุจุชูุงูู ุจูุชุฑ ฺฉูฺฉ ฺฉูู.",
                "ุจุฑุง ฺฉูฺฉ ูโุชูุงูุฏ:\n1. ุณูุงู ุฎูุฏ ุฑุง ุจู ุตูุฑุช ูุดุฎุต ุจูพุฑุณุฏ\n2. ุงุฒ ุฏฺฉููโูุง ุณุฑุน ุงุณุชูุงุฏู ฺฉูุฏ\n3. ููุถูุน ููุฑุฏ ูุธุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ\n\nูู ุฏุฑ ุฒูููโูุง ุฒุฑ ุชุฎุตุต ุฏุงุฑู:\n๐ค ููุด ูุตููุน ู ุงุฏฺฏุฑ ูุงุดู\n๐ป ุจุฑูุงููโููุณ\n๐ ุขููุฒุด ู ุงุฏฺฏุฑ\n๐ฅ ุณูุงูุช ู ุชฺฉููููฺ\n๐ผ ฺฉุณุจโูฺฉุงุฑ ู ุงุณุชุงุฑุชุงูพ\n๐ ุชฺฉููููฺโูุง ุฑูุฒ",
                "ฺฉูฺฉ ุฑุณุงู ุชุฎุตุต ูู ุงุณุช! ููุถูุนุงุช ููุฑุฏ ุนูุงูู ุดูุง:\n\n๐ฏ **ุชฺฉูฺฉุงู**: ุจุฑูุงููโููุณุ ููุด ูุตููุนุ ุฏุงุฏู\n๐ **ุขููุฒุด**: ุงุฏฺฏุฑุ ููุงุฑุชโูุง ุฌุฏุฏ\n๐ก **ุนููู**: ุชฺฉููููฺุ ุนููุ ุงุฎุจุงุฑ\n๐๏ธ **ุนูู**: ุฑุงูโุญู ูุณุงุฆูุ ูพุฑูฺูโูุง\n\nุจูพุฑุณุฏุ ูู ุงูุฌุงู ุชุง ฺฉูฺฉ ฺฉูู!",
                "ุฏุฑ ุฎุฏูุชู! ูู ูโุชูุงูู ุฏุฑุจุงุฑู:\n\n๐ฌ **ุนูู ู ุชฺฉููููฺ**\n๐ **ุฏุงุฏู ู ุชุญูู**\n๐ป **ฺฉุฏููุณ ู ุชูุณุนู**\n๐ง **ููุด ูุตููุน ู ML**\n๐ **ุชฺฉููููฺโูุง ููู**\n๐ฏ **ููุงุฑุชโูุง ุขูุฏู**\n\nุจู ุดูุง ุงุทูุงุนุงุช ููุฏ ุจุฏูู. ฺู ููุถูุน ุจุฑุง ุดูุง ุฌุฐุงุจ ุงุณุชุ"
            ]
        }
    
    def analyze_question(self, question):
        """ุชุญูู ูพุดุฑูุชู ุณูุงู ุจุง ุดูุงุณุง ููุถูุนุงุช ูุงูุน"""
        question_lower = question.lower().strip()
        words = set(question_lower.split())
        
        # ููุถูุนุงุช ุงุตู ู ฺฉููุงุช ฺฉูุฏ ุขููุง
        topic_keywords = {
            "greetings": {'ุณูุงู', 'ุฏุฑูุฏ', 'ุตุจุฎ', 'ุนุตุฑ', 'ููุช', 'hey', 'hello', 'hi'},
            "farewells": {'ุฎุฏุงุญุงูุธ', 'ุจุง', 'bye', 'ุฎุฏุงูฺฏูุฏุงุฑ', 'ูุชุดฺฉุฑู', 'ููููู', 'ุชุดฺฉุฑ'},
            "name": {'ุงุณู', 'ูุงู', 'ฺฉุณุช', 'ฺู ุงุณู', 'ูุงู ุชู', 'ุชู ฺฉ'},
            "creator": {'ุณุงุฒูุฏู', 'ฺู ฺฉุณ', 'ฺู ฺฉุณ ุณุงุฎุช', 'ฺู ฺฉุณ ุงุฌุงุฏ', 'ฺู ฺฉุณ ููุดุช'},
            "capabilities": {'ฺู ฺฉุงุฑ', 'ฺู ฺฉุงุฑ', 'ฺู ูโุชูุงู', 'ูุงุจูุช', 'ุชูุงูุง', 'ฺฉุงุฑุง'},
            "nlp_info": {'nlp', 'ุขุฎุฑู ูพุณุช', 'ูพุณุช ฒฐถ', 'ูพุณุช 206', 'ุตูุญู nlp', 'ูพุฑุฏุงุฒุด ุฒุจุงู'},
            "ai_definition": {'ููุด ูุตููุน', 'ai', 'artificial intelligence', 'ููุด ูุตููุน ฺุณุช'},
            "programming": {'ุจุฑูุงููโููุณ', 'ฺฉุฏููุณ', 'ฺฉุฏ', 'ูพุงุชูู', 'python', 'ุฌุงูุง', 'java'},
            "machine_learning": {'ุงุฏฺฏุฑ ูุงุดู', 'machine learning', 'ml', 'ูุฏู ุงุฏฺฏุฑ'},
            "python": {'ูพุงุชูู', 'python', 'ุฒุจุงู ูพุงุชูู'},
            "technology": {'ุชฺฉููููฺ', 'ููุงูุฑ', 'ุชฺฉููููฺ ฺุณุช', 'ููุงูุฑ ุงุทูุงุนุงุช'},
            "education": {'ุขููุฒุด', 'ุงุฏฺฏุฑ', 'ุชุญุตู', 'ุฏุฑุณ', 'ูุฏุฑุณู', 'ุฏุงูุดฺฏุงู'},
            "business": {'ฺฉุณุจโูฺฉุงุฑ', 'ุจุฒูุณ', 'ุงุณุชุงุฑุชุงูพ', 'ฺฉุงุฑุขูุฑู', 'ุดุบู'},
            "health": {'ุณูุงูุช', 'ุณูุงูุช', 'ูพุฒุดฺฉ', 'ุฏุฑูุงู', 'ุจูุงุฑ'},
            "jokes": {'ุฌูฺฉ', 'ุทูุฒ', 'ุฎูุฏู', 'ูุถุญฺฉ', 'ุจุงูุฒู', 'ูุทูู'},
            "learning": {'ุงุฏ ูโฺฏุฑ', 'ุงุฏฺฏุฑ', 'ุจูุชุฑ ูโุดู', 'ูพุดุฑูุช', 'ุงุฏ ฺฏุฑูุช'},
            "help": {'ฺฉูฺฉ', 'ุฑุงูููุง', 'ฺฉูฺฉ ฺฉู', 'ุฑุงูููุง ฺฉู', 'ฺฉูฺฉ ูโฺฉู'},
            "stats": {'ุขูุงุฑ', 'stat', 'ุชุนุฏุงุฏ', 'ฺูุฏุชุง', 'ฺูุฏ ุชุง ูพุฑุณุฏ'}
        }
        
        # ุจุฑุฑุณ ูุฑ ููุถูุน
        for topic, keywords in topic_keywords.items():
            if keywords.intersection(words):
                return {
                    "type": topic,
                    "topic": topic,
                    "confidence": 0.95,
                    "matched_keywords": list(keywords.intersection(words))
                }
        
        # ุงฺฏุฑ ููุถูุน ุฎุงุต ูพุฏุง ูุดุฏุ ุชุญูู ุจุฑ ุงุณุงุณ ูุญุชูุง
        return self.deep_content_analysis(question)
    
    def deep_content_analysis(self, question):
        """ุชุญูู ุนูู ูุญุชูุง ุณูุงู"""
        question_lower = question.lower()
        
        # ุชุดุฎุต ุณูุงูุงุช Wh
        if any(word in question_lower for word in ['ฺุณุช', 'ฺู', 'ฺู ฺุฒ', 'ฺู']):
            return {"type": "what_question", "topic": "ุชุนุฑู", "confidence": 0.85}
        elif any(word in question_lower for word in ['ฺุฑุง', 'ุนูุช', 'ุฏูู']):
            return {"type": "why_question", "topic": "ุนูุช", "confidence": 0.88}
        elif any(word in question_lower for word in ['ฺฺฏููู', 'ฺุทูุฑ', 'ุฑูุด']):
            return {"type": "how_question", "topic": "ุฑูุด", "confidence": 0.87}
        elif any(word in question_lower for word in ['ฺู ุฒูุงู', 'ฺฉ', 'ููุช']):
            return {"type": "when_question", "topic": "ุฒูุงู", "confidence": 0.86}
        elif any(word in question_lower for word in ['ฺฉุฌุง', 'ฺฉุฌุงุณุช', 'ูฺฉุงู']):
            return {"type": "where_question", "topic": "ูฺฉุงู", "confidence": 0.84}
        elif any(word in question_lower for word in ['ฺู ฺฉุณ', 'ฺฉุณุช']):
            return {"type": "who_question", "topic": "ุดุฎุต", "confidence": 0.89}
        
        # ุชุดุฎุต ุณูุงูุงุช ุจูู/ุฎุฑ
        if question_lower.endswith('ุ') and len(question_lower.split()) < 10:
            return {"type": "yesno_question", "topic": "ุชุฃุฏ/ุฑุฏ", "confidence": 0.82}
        
        # ุชุดุฎุต ุฏุฑุฎูุงุณุช
        if any(word in question_lower for word in ['ูโุฎูุงูู', 'ูุทูุง', 'ูุทูุงู', 'ูโุชูุงู', 'ูุดู', 'ุฎูุงูุด']):
            return {"type": "request", "topic": "ุฏุฑุฎูุงุณุช", "confidence": 0.90}
        
        # ูพุดโูุฑุถ
        return {"type": "general", "topic": "ุนููู", "confidence": 0.75}
    
    def generate_answer(self, question, analysis):
        """ุชููุฏ ูพุงุณุฎ ูุงูุน ู ููุฏ"""
        self.stats["questions_asked"] += 1
        self.stats["topics_covered"].append(analysis["topic"])
        self.stats["last_interaction"] = datetime.now().isoformat()
        
        response_type = analysis["type"]
        
        # ุงฺฏุฑ ููุถูุน ุฏุฑ ูพุงฺฏุงู ุฏุงูุด ุจุงุดุฏ
        if response_type in self.knowledge_base:
            response = random.choice(self.knowledge_base[response_type])
            return response
        
        # ุงฺฏุฑ ุณูุงู Wh ุจูุฏุ ูพุงุณุฎ ููุฏ ุจุฏู
        if response_type in ["what_question", "why_question", "how_question", 
                           "when_question", "where_question", "who_question"]:
            return self.generate_informative_answer(question, response_type)
        
        # ุงฺฏุฑ ุณูุงู ุจูู/ุฎุฑ ุจูุฏ
        if response_type == "yesno_question":
            return self.generate_yesno_answer(question)
        
        # ุงฺฏุฑ ุฏุฑุฎูุงุณุช ุจูุฏ
        if response_type == "request":
            return f"ุฏุฑุฎูุงุณุช ุดูุง ุจุฑุง '{question}' ุฏุฑุงูุช ุดุฏ. ุณุน ูโฺฉูู ฺฉูฺฉ ฺฉูู! ูุทูุงู ฺฉู ุจุดุชุฑ ุชูุถุญ ุฏูุฏ."
        
        # ุงฺฏุฑ ุขูุงุฑ ุจูุฏ
        if response_type == "stats":
            topics = set(self.stats["topics_covered"])
            return f"๐ **ุขูุงุฑ ุชุนุงูู**:\n\nโข ุณูุงูุงุช ูพุงุณุฎ ุฏุงุฏู: {self.stats['questions_asked']}\nโข ููุถูุนุงุช ูพูุดุด ุฏุงุฏู ุดุฏู: {len(topics)} ููุถูุน\nโข ุขุฎุฑู ุชุนุงูู: {self.stats['last_interaction'][11:16]}\nโข ููุถูุนุงุช: {', '.join(list(topics)[:5])}{' ู ...' if len(topics) > 5 else ''}"
        
        # ุฏุฑ ุบุฑ ุงู ุตูุฑุชุ ูพุงุณุฎ ุขููุฒูุฏู
        return self.generate_educated_response(question)
    
    def generate_informative_answer(self, question, question_type):
        """ุชููุฏ ูพุงุณุฎ ุขููุฒูุฏู ุจุฑุง ุณูุงูุงุช Wh"""
        informative_responses = {
            "what_question": f"ุฏุฑ ููุฑุฏ '{question}'ุ ูโุชูุงูู ุจฺฏูู ฺฉู:\n\nุงู ููุถูุน ุจู ุญูุฒูโูุง ูุฎุชูู ูุฑุจูุท ูโุดูุฏ. ุขุง ูโุฎูุงูุฏ ุฏุฑุจุงุฑู ุฌูุจู ุฎุงุต ุงุฒ ุขู ุจุดุชุฑ ุจุฏุงูุฏุ",
            "why_question": f"ุจุฑุง ูพุงุณุฎ ุจู 'ฺุฑุง {question}'ุ ุจุงุฏ ุจู ฺูุฏ ุฏูู ุงุดุงุฑู ฺฉูู:\n\n1. ุฏูู ุงูู...\n2. ุฏูู ุฏูู...\n3. ุฏูู ุณูู...\n\nุขุง ูโุฎูุงูุฏ ุฏุฑุจุงุฑู ูุฑ ฺฉุฏุงู ุจุดุชุฑ ุชูุถุญ ุฏููุ",
            "how_question": f"ุจุฑุง '{question}'ุ ูุฑุงุญู ุฒุฑ ุฑุง ูพุดููุงุฏ ูโฺฉูู:\n\n1. ูุฑุญูู ุงูู\n2. ูุฑุญูู ุฏูู\n3. ูุฑุญูู ุณูู\n4. ูุฑุญูู ฺูุงุฑู\n\nุงฺฏุฑ ุฏุฑุจุงุฑู ูุฑ ูุฑุญูู ุณูุงู ุฏุงุฑุฏุ ุจูพุฑุณุฏ!",
            "when_question": f"ุฏุฑ ููุฑุฏ ุฒูุงู '{question}'ุ ุจุณุชฺฏ ุจู ุนูุงูู ูุฎุชูู ุฏุงุฑุฏ. ูุนูููุงู ุจูุชุฑู ุฒูุงู ููุช ุงุณุช ฺฉู...",
            "where_question": f"ุจุฑุง ูฺฉุงู '{question}'ุ ฺูุฏ ฺฏุฒูู ูุฌูุฏ ุฏุงุฑุฏ:\nโข ฺฏุฒูู ุงูู\nโข ฺฏุฒูู ุฏูู\nโข ฺฏุฒูู ุณูู\n\nฺฉุฏุงู ฺฉ ุจุฑุง ุดูุง ููุงุณุจโุชุฑ ุงุณุชุ",
            "who_question": f"ุฏุฑ ูพุงุณุฎ ุจู 'ฺู ฺฉุณ {question}'ุ ุจุงุฏ ุจฺฏูู ฺฉู ูุนูููุงู ุงูุฑุงุฏ ฺฉู...\n\nุงฺฏุฑ ุดุฎุต ุฎุงุต ูุฏ ูุธุฑุชุงู ุงุณุชุ ูุงู ุจุจุฑุฏ."
        }
        
        return informative_responses.get(question_type, self.generate_educated_response(question))
    
    def generate_yesno_answer(self, question):
        """ูพุงุณุฎ ุจู ุณูุงูุงุช ุจูู/ุฎุฑ"""
        # ุชุญูู ุณูุงู ุจุฑุง ูพุงุณุฎ ููุทู
        if any(word in question.lower() for word in ['ูโุดูุฏ', 'ูโุชูุงู', 'ููฺฉู', 'ูุงุจู']):
            return "ุจููุ ุงู ฺฉุงุฑ ุงูฺฉุงูโูพุฐุฑ ุงุณุช. ุงูุง ุดุฑุงุท ุฎุงุต ุฎูุฏ ุฑุง ุฏุงุฑุฏ."
        elif any(word in question.lower() for word in ['ุฏุฑุณุช', 'ุตุญุญ', 'ูุงูุน']):
            return "ุจููุ ุงู ุฏุฑุณุช ุงุณุช. ุดูุงูุฏ ู ุชุญููุงุช ุขู ุฑุง ุชุฃุฏ ูโฺฉููุฏ."
        elif any(word in question.lower() for word in ['ุบูุท', 'ูุงุฏุฑุณุช', 'ุงุดุชุจุงู']):
            return "ุฎุฑุ ุงู ูุงุฏุฑุณุช ุงุณุช. ุงุทูุงุนุงุช ุตุญุญ ูุชูุงูุช ูุณุชูุฏ."
        else:
            return "ูพุงุณุฎ ุจู ุงู ุณูุงู ูพฺุฏู ุงุณุช ู ุจุณุชฺฏ ุจู ุดุฑุงุท ุฏุงุฑุฏ. ุขุง ูโุฎูุงูุฏ ุจุดุชุฑ ุชูุถุญ ุฏููุ"
    
    def generate_educated_response(self, question):
        """ุชููุฏ ูพุงุณุฎ ุขููุฒูุฏู ุจุฑุง ุณูุงูุงุช ุนููู"""
        educated_topics = {
            "ุนูู": ["ูุฒฺฉ", "ุดู", "ุฒุณุช", "ุฑุงุถ", "ูุฌูู"],
            "ุชฺฉููููฺ": ["ุจุฑูุงููโููุณ", "ููุด ูุตููุน", "ุฑุจุงุชฺฉ", "ุงูุชุฑูุช"],
            "ุขููุฒุด": ["ุงุฏฺฏุฑ", "ูุทุงูุนู", "ุชุญุตู", "ููุงุฑุช"],
            "ุฒูุฏฺฏ": ["ุณูุงูุช", "ุฑูุงุจุท", "ุดุบู", "ููููุช"]
        }
        
        # ุชุดุฎุต ููุถูุน ฺฉู ุณูุงู
        detected_topic = "ุนููู"
        for topic, keywords in educated_topics.items():
            if any(keyword in question.lower() for keyword in keywords):
                detected_topic = topic
                break
        
        responses_by_topic = {
            "ุนูู": f"ุณูุงู ุนูู ุฌุงูุจ ูพุฑุณุฏุฏ! ุฏุฑ ููุฑุฏ '{question}'ุ ุนูู ูุฏุฑู ูุธุฑูโูุง ูุฎุชูู ุฏุงุฑุฏ. ุขุง ูโุฎูุงูุฏ ุฏุฑุจุงุฑู ูุธุฑู ุฎุงุต ุจุดุชุฑ ุจุฏุงูุฏุ",
            "ุชฺฉููููฺ": f"ุงุฒ ุณูุงู ุชฺฉููููฺฺฉ ุดูุง ูุชุดฺฉุฑู! '{question}' ููุถูุน ุฏุงุบ ุฏุฑ ุฏูุง tech ุงุณุช. ุชฺฉููููฺโูุง ุฌุฏุฏ ุฏุงุฆูุงู ุงู ุญูุฒู ุฑุง ุชุบุฑ ูโุฏููุฏ.",
            "ุขููุฒุด": f"ุณูุงู ุขููุฒุด ุฎูุจ ุงุณุช! ุจุฑุง '{question}'ุ ุฑูุดโูุง ูุฎุชูู ูุฌูุฏ ุฏุงุฑุฏ. ุจูุชุฑู ุฑูุด ุจุณุชฺฏ ุจู ุดุฑุงุท ู ูุฏู ุดูุง ุฏุงุฑุฏ.",
            "ุฒูุฏฺฏ": f"ุณูุงู ุฒูุฏฺฏ ููู ูพุฑุณุฏุฏ! '{question}' ฺุงูุด ุงุณุช ฺฉู ุจุณุงุฑ ุจุง ุขู ุฑูุจุฑู ูุณุชูุฏ. ุฑุงูโุญูโูุง ูุฎุชูู ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ูโุชูุงูู ุชูุถุญ ุฏูู.",
            "ุนููู": f"ุณูุงู ุฌุงูุจ ูพุฑุณุฏุฏ! '{question}' ููุถูุน ููู ุงุณุช. ูู ูโุชูุงูู ุงุทูุงุนุงุช ููุฏ ุฏุฑ ุงู ุฒููู ุงุฑุงุฆู ุฏูู. ุขุง ูโุฎูุงูุฏ ุฌุฒุฆุงุช ุจุดุชุฑ ุจุฏุงูุฏุ"
        }
        
        return responses_by_topic.get(detected_topic, responses_by_topic["ุนููู"])

# ุงุฏุงูู ูุงู server.py (ุจูู ฺฉุฏ ุจุฏูู ุชุบุฑ ูุงููุฏ ูุจู)
# ููุท ฺฉูุงุณ ุจุงูุง ุชุบุฑ ฺฉุฑุฏูุ ุจูู ฺฉุฏ ููุงู ุงุณุช

# ุตูุญู ุงุตู ุจุง HTML ฺฉุงูู
@app.get("/")
async def root():
    html_content = """
    <!DOCTYPE html>
    <html dir="rtl" lang="fa">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>๐ค natiq-ultimate v3.1 | ููุด ูุตููุน ูุงุฑุณ ุจุง ุฏุงูุด ูุงูุน</title>
        <style>
            /* Reset ู ุงุณุชุงูโูุง ูุจู ุจุฏูู ุชุบุฑ */
            * { margin: 0; padding: 0; box-sizing: border-box; }
            
            body {
                font-family: 'Vazirmatn', 'Segoe UI', Tahoma, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                color: #333;
                line-height: 1.6;
            }
            
            .container {
                max-width: 1200px;
                margin: 0 auto;
                background: white;
                min-height: 100vh;
                box-shadow: 0 0 40px rgba(0,0,0,0.1);
            }
            
            /* ูุฏุฑ */
            .header {
                background: linear-gradient(90deg, #4f46e5, #7c3aed);
                color: white;
                padding: 20px 30px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                flex-wrap: wrap;
            }
            
            .logo {
                display: flex;
                align-items: center;
                gap: 15px;
            }
            
            .logo i {
                font-size: 2.5em;
                animation: float 3s ease-in-out infinite;
            }
            
            @keyframes float {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-10px); }
            }
            
            .logo h1 {
                font-size: 1.8em;
                font-weight: 700;
            }
            
            .version {
                background: rgba(255,255,255,0.2);
                padding: 5px 15px;
                border-radius: 15px;
                font-size: 0.9em;
                font-weight: bold;
            }
            
            .status {
                display: flex;
                align-items: center;
                gap: 10px;
                background: rgba(255,255,255,0.1);
                padding: 8px 20px;
                border-radius: 20px;
            }
            
            .status-dot {
                width: 10px;
                height: 10px;
                background: #4ade80;
                border-radius: 50%;
                animation: blink 1.5s infinite;
            }
            
            @keyframes blink {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.3; }
            }
            
            /* ูุญุชูุง ุงุตู */
            .main-content {
                display: flex;
                min-height: 70vh;
            }
            
            .chat-area {
                flex: 1;
                padding: 30px;
                background: #f8fafc;
                display: flex;
                flex-direction: column;
            }
            
            .messages {
                flex: 1;
                overflow-y: auto;
                padding: 20px;
                background: white;
                border-radius: 15px;
                box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
                margin-bottom: 25px;
                max-height: 60vh;
            }
            
            .message {
                margin: 15px 0;
                padding: 15px 20px;
                border-radius: 15px;
                max-width: 85%;
                animation: slideIn 0.3s ease;
            }
            
            @keyframes slideIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            
            .bot-message {
                background: linear-gradient(135deg, #e3f2fd, #bbdefb);
                margin-right: auto;
                border-top-right-radius: 5px;
                border-right: 4px solid #2196f3;
            }
            
            .user-message {
                background: linear-gradient(135deg, #4f46e5, #7c3aed);
                color: white;
                margin-left: auto;
                border-top-left-radius: 5px;
                border-left: 4px solid #3730a3;
            }
            
            /* ุจูู ุงุณุชุงูโูุง ุจุฏูู ุชุบุฑ */
            /* ... */
            
        </style>
        
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
        
        <script>
            class NatiqApp {
                constructor() {
                    this.sessionId = 'natiq_' + Date.now();
                    this.baseUrl = window.location.origin;
                    this.messageCount = 0;
                    this.init();
                }
                
                init() {
                    console.log('๐ natiq-ultimate v3.1 ุดุฑูุน ุดุฏ');
                    this.setupEventListeners();
                    this.updateStatus('โ ูุชุตู ุจู ุณุฑูุฑ');
                    
                    // ููุงุด ุชุงุฑุฎ ู ุฒูุงู
                    this.updateDateTime();
                    setInterval(() => this.updateDateTime(), 60000);
                }
                
                setupEventListeners() {
                    const sendBtn = document.getElementById('sendButton');
                    const messageInput = document.getElementById('messageInput');
                    
                    sendBtn.addEventListener('click', () => this.sendMessage());
                    
                    messageInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter' && !e.shiftKey) {
                            e.preventDefault();
                            this.sendMessage();
                        }
                    });
                    
                    // ุฏฺฉููโูุง ุณุฑุน
                    document.querySelectorAll('.quick-btn').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            const text = e.target.getAttribute('data-question') || 
                                       e.target.closest('.quick-btn').getAttribute('data-question');
                            if (text) {
                                messageInput.value = text;
                                this.sendMessage();
                            }
                        });
                    });
                }
                
                updateDateTime() {
                    const now = new Date();
                    const options = {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    };
                    const dateStr = now.toLocaleDateString('fa-IR', options);
                    document.getElementById('currentDateTime').textContent = dateStr;
                }
                
                updateStatus(message) {
                    const statusText = document.getElementById('statusText');
                    if (statusText) {
                        statusText.textContent = message;
                    }
                }
                
                async sendMessage() {
                    const messageInput = document.getElementById('messageInput');
                    const message = messageInput.value.trim();
                    
                    if (!message) return;
                    
                    // ููุงุด ูพุงู ฺฉุงุฑุจุฑ
                    this.addMessage(message, 'user');
                    messageInput.value = '';
                    this.messageCount++;
                    
                    // ููุงุด ุชุงูพูฺฏ
                    this.showTyping();
                    
                    try {
                        const response = await fetch(this.baseUrl + '/api/chat/' + this.sessionId, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ message: message })
                        });
                        
                        if (!response.ok) {
                            throw new Error(`ุฎุทุง HTTP: ${response.status}`);
                        }
                        
                        const data = await response.json();
                        
                        this.hideTyping();
                        this.addMessage(data.answer, 'bot');
                        this.updateStatus('โ ูพุงุณุฎ ุฏุฑุงูุช ุดุฏ');
                        
                        // ุจุฑูุฒุฑุณุงู ุขูุงุฑ
                        this.updateStats();
                        
                    } catch (error) {
                        this.hideTyping();
                        console.error('โ ุฎุทุง:', error);
                        
                        this.addMessage('โ๏ธ ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ. ูุทูุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.', 'error');
                        this.updateStatus('โ ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท');
                    }
                }
                
                addMessage(text, type) {
                    const messagesDiv = document.getElementById('messages');
                    const time = new Date().toLocaleTimeString('fa-IR', {
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    
                    const messageDiv = document.createElement('div');
                    messageDiv.className = `message ${type === 'user' ? 'user-message' : type === 'error' ? 'error-message' : 'bot-message'}`;
                    
                    const icon = type === 'user' ? '๐ค' : 
                                 type === 'error' ? 'โ๏ธ' : '๐ค';
                    
                    messageDiv.innerHTML = `
                        <div style="display: flex; align-items: flex-start; gap: 12px;">
                            <div style="font-size: 1.4em; flex-shrink: 0;">
                                ${icon}
                            </div>
                            <div style="flex: 1;">
                                <div style="white-space: pre-wrap;">${this.escapeHtml(text)}</div>
                                <div class="message-time">${time}</div>
                            </div>
                        </div>
                    `;
                    
                    messagesDiv.appendChild(messageDiv);
                    messagesDiv.scrollTop = messagesDiv.scrollHeight;
                }
                
                showTyping() {
                    const messagesDiv = document.getElementById('messages');
                    
                    const typingDiv = document.createElement('div');
                    typingDiv.className = 'message bot-message';
                    typingDiv.id = 'typingIndicator';
                    typingDiv.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div>๐ค</div>
                            <div style="display: flex; gap: 5px;">
                                <span style="animation: blink 1.4s infinite; color: #4f46e5;">โ</span>
                                <span style="animation: blink 1.4s infinite 0.2s; color: #7c3aed;">โ</span>
                                <span style="animation: blink 1.4s infinite 0.4s; color: #8b5cf6;">โ</span>
                            </div>
                        </div>
                    `;
                    
                    messagesDiv.appendChild(typingDiv);
                    messagesDiv.scrollTop = messagesDiv.scrollHeight;
                }
                
                hideTyping() {
                    const typing = document.getElementById('typingIndicator');
                    if (typing) {
                        typing.remove();
                    }
                }
                
                updateStats() {
                    document.getElementById('messageCount').textContent = this.messageCount;
                    document.getElementById('sessionIdDisplay').textContent = this.sessionId.substring(0, 15) + '...';
                }
                
                escapeHtml(text) {
                    const div = document.createElement('div');
                    div.textContent = text;
                    return div.innerHTML;
                }
            }
            
            // ุฑุงูโุงูุฏุงุฒ ุงูพ
            document.addEventListener('DOMContentLoaded', () => {
                window.natiqApp = new NatiqApp();
                document.getElementById('messageInput').focus();
            });
        </script>
    </head>
    <body>
        <div class="container">
            <!-- ูุฏุฑ -->
            <header class="header">
                <div class="logo">
                    <i class="fas fa-robot"></i>
                    <div>
                        <h1>natiq-ultimate</h1>
                        <span class="version">ูุณุฎู ณ.ฑ</span>
                    </div>
                </div>
                <div class="status">
                    <span class="status-dot"></span>
                    <span id="statusText">ุฏุฑ ุญุงู ุงุชุตุงู...</span>
                </div>
            </header>
            
            <!-- ูุญุชูุง ุงุตู -->
            <div class="main-content">
                <!-- ูุณูุช ฺุช -->
                <div class="chat-area">
                    <div class="messages" id="messages">
                        <!-- ูพุงู ุฎูุดโุขูุฏฺฏู -->
                        <div class="welcome">
                            <h2>๐ ุจู natiq-ultimate ุฎูุด ุขูุฏุฏ!</h2>
                            <p>ูู ฺฉ ุฏุณุชุงุฑ ููุด ูุตููุน ูุงุฑุณ ุจุง <strong>ูพุงฺฏุงู ุฏุงูุด ุฌุงูุน</strong> ูุณุชู.</p>
                            
                            <div class="features">
                                <div class="feature">
                                    <i class="fas fa-brain"></i>
                                    <h3>ุฏุงูุด ูุงูุน</h3>
                                    <p>ูพุงุณุฎโูุง ุฏูู ู ููุฏ</p>
                                </div>
                                <div class="feature">
                                    <i class="fas fa-book"></i>
                                    <h3>ููุถูุนุงุช ูุชููุน</h3>
                                    <p>ฑต+ ุญูุฒู ุชุฎุตุต</p>
                                </div>
                                <div class="feature">
                                    <i class="fas fa-bolt"></i>
                                    <h3>ูพุงุณุฎโูุง ุนูู</h3>
                                    <p>ุฑุงูโุญูโูุง ฺฉุงุฑุจุฑุฏ</p>
                                </div>
                                <div class="feature">
                                    <i class="fas fa-graduation-cap"></i>
                                    <h3>ุขููุฒุด ููุฏ</h3>
                                    <p>ุงุทูุงุนุงุช ุจูโุฑูุฒ</p>
                                </div>
                            </div>
                            
                            <p><strong>๐ก ูโุชูุงูุฏ ุฏุฑุจุงุฑู ุงู ููุถูุนุงุช ุจูพุฑุณุฏ:</strong></p>
                            <p style="font-size: 0.9em; margin-top: 10px;">
                                ๐ค ููุด ูุตููุน โข ๐ป ุจุฑูุงููโููุณ โข ๐ฑ ุชฺฉููููฺ โข ๐ ุขููุฒุด โข ๐ฅ ุณูุงูุช โข ๐ผ ฺฉุณุจโูฺฉุงุฑ
                            </p>
                        </div>
                    </div>
                    
                    <!-- ูุฑูุฏ -->
                    <div class="input-area">
                        <div class="input-group">
                            <input 
                                type="text" 
                                id="messageInput" 
                                placeholder="ุณูุงู ุฎูุฏ ุฑุง ุงูุฌุง ุจููุณุฏ (ูุซูุงู: ููุด ูุตููุน ฺุณุชุ)..." 
                                autocomplete="off"
                                autofocus
                            >
                            <button id="sendButton">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        
                        <div class="quick-buttons">
                            <button class="quick-btn" data-question="ููุด ูุตููุน ฺุณุชุ">
                                <i class="fas fa-brain"></i> ููุด ูุตููุน
                            </button>
                            <button class="quick-btn nlp" data-question="ุขุฎุฑู ูพุณุช ุตูุญู nlp">
                                <i class="fas fa-file-alt"></i> ูพุณุช ฒฐถ NLP
                            </button>
                            <button class="quick-btn" data-question="ุจุฑูุงููโููุณ ฺุณุชุ">
                                <i class="fas fa-code"></i> ุจุฑูุงููโููุณ
                            </button>
                            <button class="quick-btn" data-question="ูพุงุชูู ฺุณุชุ">
                                <i class="fab fa-python"></i> ูพุงุชูู
                            </button>
                            <button class="quick-btn" data-question="ุงุฏฺฏุฑ ูุงุดู ฺุณุชุ">
                                <i class="fas fa-robot"></i> ุงุฏฺฏุฑ ูุงุดู
                            </button>
                            <button class="quick-btn" data-question="ฺฉ ุฌูฺฉ ุจฺฏู">
                                <i class="fas fa-laugh"></i> ุฌูฺฉ
                            </button>
                            <button class="quick-btn" data-question="ุขูุงุฑ ุงู ุฌูุณู">
                                <i class="fas fa-chart-bar"></i> ุขูุงุฑ
                            </button>
                            <button class="quick-btn" data-question="ฺู ฺฉุงุฑูุง ูโุชูุงู ุงูุฌุงู ุฏูุ">
                                <i class="fas fa-list"></i> ูุงุจูุชโูุง
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- ุณุงุฏุจุงุฑ -->
                <div class="sidebar">
                    <div class="sidebar-section">
                        <h3><i class="fas fa-info-circle"></i> ุงุทูุงุนุงุช ุณุณุชู</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="messageCount">0</div>
                                <div>ูพุงูโูุง</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">ณ.ฑ</div>
                                <div>ูุณุฎู</div>
                            </div>
                        </div>
                        <p style="margin-top: 15px; font-size: 0.9em;">
                            <strong>๐ ูุญุท:</strong> Vercel<br>
                            <strong>๐ ูุถุนุช:</strong> ูุนุงู<br>
                            <strong>๐ ุฒูุงู:</strong> <span id="currentDateTime">--</span><br>
                            <strong>๐ ุดูุงุณู:</strong> <span id="sessionIdDisplay">...</span>
                        </p>
                    </div>
                    
                    <div class="sidebar-section">
                        <h3><i class="fas fa-lightbulb"></i> ููููู ุณูุงูุงุช</h3>
                        <div style="font-size: 0.9em;">
                            <p><strong>ุจุฑุง ุชุณุช ุจูพุฑุณุฏ:</strong></p>
                            <ul style="padding-right: 20px; margin-top: 10px;">
                                <li style="margin-bottom: 8px;">"ููุด ูุตููุน ฺุณุชุ"</li>
                                <li style="margin-bottom: 8px;">"ุจุฑูุงููโููุณ ุงุฏ ุจฺฏุฑูุ"</li>
                                <li style="margin-bottom: 8px;">"ูพุงุชูู ุจุฑุง ฺุณุชุ"</li>
                                <li style="margin-bottom: 8px;">"ุชฺฉููููฺโูุง ุฌุฏุฏ"</li>
                                <li style="margin-bottom: 8px;">"ุณูุงูุช ุฏุฌุชุงู ฺุณุชุ"</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="sidebar-section">
                        <h3><i class="fas fa-terminal"></i> ุนููุงุช ุณุฑุน</h3>
                        <div>
                            <button onclick="testApi()" style="width:100%; padding:12px; background:#4f46e5; color:white; border:none; border-radius:8px; cursor:pointer; margin-bottom:10px; display:flex; align-items:center; justify-content:center; gap:8px;">
                                <i class="fas fa-heartbeat"></i> ุชุณุช ุณูุงูุช API
                            </button>
                            <button onclick="clearChat()" style="width:100%; padding:12px; background:#ef4444; color:white; border:none; border-radius:8px; cursor:pointer; display:flex; align-items:center; justify-content:center; gap:8px;">
                                <i class="fas fa-trash"></i> ูพุงฺฉ ฺฉุฑุฏู ฺุช
                            </button>
                            <button onclick="showNlpInfo()" style="width:100%; padding:12px; background:#8b5cf6; color:white; border:none; border-radius:8px; cursor:pointer; margin-top:10px; display:flex; align-items:center; justify-content:center; gap:8px;">
                                <i class="fas fa-info-circle"></i> ุงุทูุงุนุงุช NLP
                            </button>
                            <div id="testResult" style="margin-top:15px; padding:10px; border-radius:8px; display:none;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <script>
            // ููุงุด ุงุทูุงุนุงุช NLP
            function showNlpInfo() {
                const message = "๐น **ุขุฎุฑู ูพุณุช ุตูุญู NLP**: ุดูุงุฑู 206\n๐ ุชุงุฑุฎ: ุฏโูุงู 1403\n๐ ููุถูุน: ูพุฑุฏุงุฒุด ุฒุจุงู ุทุจุน ูพุดุฑูุชู\nโ ูุถุนุช: ููุชุดุฑ ุดุฏู\n\nุงู ูพุณุช ุฌุงูุนโุชุฑู ูุทูุจ ุฏุฑ ุญูุฒู NLP ูุงุฑุณ ุงุณุช!";
                window.natiqApp.addMessage(message, 'bot');
            }
            
            // ุชุณุช API
            async function testApi() {
                const resultDiv = document.getElementById('testResult');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = '<div style="color:#f59e0b; padding:10px; background:#fffbeb; border-radius:6px; text-align:center;">โณ ุฏุฑ ุญุงู ุชุณุช...</div>';
                
                try {
                    const response = await fetch(window.natiqApp.baseUrl + '/api/health');
                    const data = await response.json();
                    
                    resultDiv.innerHTML = `
                        <div style="background:#d1fae5; color:#065f46; padding:12px; border-radius:6px;">
                            <strong style="display:block; margin-bottom:5px;">โ ุณุณุชู ุณุงูู ุงุณุช</strong>
                            <div style="font-size:0.9em;">
                                ูุณุฎู: ${data.version}<br>
                                ุณุฑูุณ: ${data.service}<br>
                                ูฺฺฏโูุง: ${data.features.length} ููุฑุฏ
                            </div>
                        </div>
                    `;
                } catch (error) {
                    resultDiv.innerHTML = `
                        <div style="background:#fee2e2; color:#7f1d1d; padding:12px; border-radius:6px;">
                            <strong style="display:block; margin-bottom:5px;">โ ุฎุทุง ุฏุฑ ุชุณุช</strong>
                            <div style="font-size:0.9em;">${error.message}</div>
                        </div>
                    `;
                }
                
                setTimeout(() => {
                    resultDiv.style.display = 'none';
                }, 5000);
            }
            
            // ูพุงฺฉ ฺฉุฑุฏู ฺุช
            function clearChat() {
                if (confirm('ุขุง ูุทูุฆู ูุณุชุฏ ฺฉู ูโุฎูุงูุฏ ููู ฺฏูุชฺฏู ุฑุง ูพุงฺฉ ฺฉูุฏุ')) {
                    const messagesDiv = document.getElementById('messages');
                    const welcomeDiv = messagesDiv.querySelector('.welcome');
                    
                    while (messagesDiv.firstChild) {
                        messagesDiv.removeChild(messagesDiv.firstChild);
                    }
                    
                    if (welcomeDiv) {
                        messagesDiv.appendChild(welcomeDiv);
                    }
                    
                    window.natiqApp.messageCount = 0;
                    window.natiqApp.updateStats();
                    window.natiqApp.updateStatus('โ ฺฏูุชฺฏู ูพุงฺฉ ุดุฏ');
                    
                    setTimeout(() => {
                        window.natiqApp.addMessage('ฺฏูุชฺฏู ุจุง ููููุช ูพุงฺฉ ุดุฏ. ุญุงูุง ูโุชูุงูุฏ ุณูุงูุงุช ูุงูุน ุจูพุฑุณุฏ!', 'bot');
                    }, 300);
                }
            }
        </script>
    </body>
    </html>
    """
    return HTMLResponse(html_content)

# API Endpoints
@app.get("/api/health")
async def health_check():
    return {
        "status": "healthy",
        "service": "natiq-ultimate",
        "version": "3.1.0",
        "environment": "vercel",
        "timestamp": datetime.now().isoformat(),
        "message": "ุณุฑูุฑ ููุด ูุตููุน ูุงุฑุณ ุจุง ูพุงฺฏุงู ุฏุงูุด ุฌุงูุน ูุนุงู ุงุณุช",
        "features": [
            "ุฏุงูุด ูุงูุน ุฏุฑ ฑต+ ููุถูุน",
            "ูพุงุณุฎโูุง ุฏูู ู ููุฏ",
            "ูพุดุชุจุงู ุงุฒ ุณูุงูุงุช Wh",
            "ุขููุฒุด ุจุฑูุงููโููุณ",
            "ุงุทูุงุนุงุช ููุด ูุตููุน",
            "ูพุงุณุฎ ุจู ุณูุงูุงุช ุนูู"
        ],
        "topics_count": 16
    }

@app.post("/api/chat/{session_id}")
async def chat_endpoint(session_id: str, request: dict):
    try:
        question = request.get("message", "")
        
        if not question or question.strip() == "":
            raise HTTPException(status_code=400, detail="ูพุงู ููโุชูุงูุฏ ุฎุงู ุจุงุดุฏ")
        
        natiq = NatiqKnowledgeAI()
        analysis = natiq.analyze_question(question)
        answer = natiq.generate_answer(question, analysis)
        
        return {
            "session_id": session_id,
            "question": question,
            "answer": answer,
            "analysis": {
                "type": analysis.get("type"),
                "topic": analysis.get("topic"),
                "confidence": analysis.get("confidence")
            },
            "stats": natiq.stats,
            "timestamp": datetime.now().isoformat(),
            "version": "3.1.0"
        }
        
    except HTTPException:
        raise
    except Exception as e:
        return JSONResponse(
            status_code=500,
            content={
                "error": str(e),
                "message": "ุฎุทุง ุฏุฑ ูพุฑุฏุงุฒุด ุณูุงู",
                "timestamp": datetime.now().isoformat()
            }
        )

# ููุฏูุฑ ุจุฑุง favicon.ico
@app.get("/favicon.ico")
async def favicon():
    return JSONResponse({"status": "no favicon"})

# ุจุฑุง Vercel
app = app

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
